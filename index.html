<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI æ™¶ç‰‡ 3D å±•ç¤ºå€å¡Š (äº’å‹•ç™¼å…‰ - ä¿®æ­£ç‰ˆ)</title>

    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>

    <style>
        /* (CSS æ¨£å¼ä¿æŒä¸è®Šï¼Œç‚ºäº†ç°¡æ½”é€™è£¡åªä¿ç•™é—œéµéƒ¨åˆ†) */
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #f2f2f2; }
        .hero { background: linear-gradient(180deg, #184c7e 0%, #297be7 100%); color: white; padding: 80px 20px 60px; text-align: center; overflow: hidden; min-height: 550px; }
        .hero-container { max-width: 1200px; margin: 0 auto; }
        .hero__content { display: flex; flex-direction: column; align-items: center; }
        .hero__title { font-size: 2.8em; font-weight: 700; line-height: 1.2; margin-bottom: 20px; }
        .static-page__introduction-subtitle { font-size: 1.1em; max-width: 600px; margin-bottom: 40px; line-height: 1.5; }
        .hero__model { width: 100%; max-width: 800px; height: 450px; margin: 40px auto; position: relative; }
        model-viewer {
            width: 100%;
            height: 100%;
            border: none;
            --progress-bar-color: #1caad9; 
            --poster-color: #2e3644; 
        }
        
        .interaction-buttons {
            margin-top: 20px;
            margin-bottom: -40px; 
            z-index: 10;
            position: relative;
            display: flex;
            justify-content: center;
            flex-wrap: wrap; 
            gap: 10px; 
        }

        .btn-effect {
            padding: 10px 15px;
            border-radius: 8px;
            border: none;
            cursor: not-allowed; /* é è¨­ç¦ç”¨ï¼Œç›´åˆ°æ¨¡å‹è¼‰å…¥ */
            font-weight: 600;
            transition: all 0.2s;
            font-size: 0.9em;
            opacity: 0.5;
        }
        
        .btn-effect.active {
            cursor: pointer;
            opacity: 1;
        }

        .btn-emissive { background-color: #FF00FF; color: white; }
        .btn-emissive:hover { background-color: #C000C0; }
        .btn-color { background-color: #4CAF50; color: white; }
        .btn-color:hover { background-color: #45a049; }
        .btn-metallic { background-color: #FFD700; color: #1f2937; }
        .btn-metallic:hover { background-color: #CCAA00; }
        .btn-reset { background-color: #555555; color: white; }
        .btn-reset:hover { background-color: #333333; }
        
        .hero__button { display: inline-block; padding: 12px 30px; border-radius: 5px; text-decoration: none; font-weight: 600; font-size: 1.05em; margin: 0 10px 10px; cursor: pointer; border: none; transition: background-color 0.3s; }
        .btn-primary { background-color: #1caad9; color: white; }
        .btn-primary:hover { background-color: #1c88bb; }
        .btn-important { background-color: #ff9e3a; color: white; }
        .btn-important:hover { background-color: #ff8507; }
        
        @media (max-width: 768px) {
            .hero__title { font-size: 2em; }
            .hero__model { height: 300px; }
            .interaction-buttons { gap: 8px; }
        }
    </style>
</head>
<body>

    <div class="hero">
        
        <div class="hero-container">
            <div class="hero__content">
                <div class="hero__text">
                    <h1 class="hero__title">
                        AI æ™¶ç‰‡è£½é€ æµç¨‹æ¨¡æ“¬
                    </h1>
                    <p class="static-page__introduction-subtitle">
                        é»æ“Šä¸‹æ–¹æŒ‰éˆ•ï¼Œè§€å¯Ÿ 3D å †ç–Šæ™¶ç‰‡æ¨¡å‹çš„ä¸åŒè¦–è¦ºæ•ˆæœã€‚
                    </p>
                </div>
                
                <div class="interaction-buttons">
                    <button class="btn-effect btn-emissive" id="btn-emissive" onclick="setEmissive('#FF00FF', 0.5)">ğŸ’œ å•Ÿå‹•ç™¼å…‰</button>
                    <button class="btn-effect btn-color" id="btn-color" onclick="setBaseColor('#00FFCC')">ğŸ§ª æ”¹è®Šé¡è‰²</button>
                    <button class="btn-effect btn-metallic" id="btn-metallic" onclick="setMaterialEffect(0.9, 0.2)">ğŸ’ é¡é¢é‡‘å±¬</button>
                    <button class="btn-effect btn-reset" id="btn-reset" onclick="resetMaterials()">ğŸ”„ é‡è¨­å…¨éƒ¨</button>
                </div>

                <div class="hero__model">
                    <model-viewer 
                        id="ai-chip-viewer"
                        src="https://raw.githubusercontent.com/dgplay001gmail/0002/main/ai_cpu_concept_fbx.compressed.glb" 
                        alt="AI æ™¶ç‰‡æ¦‚å¿µæ¨¡å‹"
                        poster="https://via.placeholder.com/800x450/184c7e/FFFFFF?text=3D+Model+Preview" 
                        camera-controls 
                        auto-rotate 
                        shadow-intensity="1"
                        environment-image="neutral"
                        loading="auto"
                        exposure="1.2"
                        camera-orbit="0deg 90deg 100%" 
                        field-of-view="30deg"
                    >
                    </model-viewer>
                </div>

                <button class="button btn-primary btn-large hero__button" onclick="alert('Join for Free Action!')">
                    JOIN FOR FREE
                </button>
                <a class="button btn-important btn-large hero__button" href="/plans?ref=home_page">
                    SEE PLANS
                </a>
                
            </div>
        </div>
    </div>

    <script>
        const modelViewer = document.getElementById('ai-chip-viewer');
        // ç´€éŒ„æ¨¡å‹çš„é è¨­ç‹€æ…‹
        let defaultMaterialState = []; 
        let materialsReady = false;

        // ===========================================
        // 1. æ¨¡å‹è¼‰å…¥å¾Œåˆå§‹åŒ–
        // ===========================================
        modelViewer.addEventListener('load', () => {
            console.log('3D æ¨¡å‹å·²è¼‰å…¥ï¼Œé–‹å§‹åˆå§‹åŒ–æè³ªã€‚');
            materialsReady = true;
            
            // å•Ÿç”¨æŒ‰éˆ•
            document.querySelectorAll('.btn-effect').forEach(btn => {
                btn.classList.add('active');
                btn.style.cursor = 'pointer';
            });
            
            // å„²å­˜æ‰€æœ‰æè³ªçš„åˆå§‹ç‹€æ…‹
            modelViewer.model.materials.forEach(material => {
                if (material.pbrMetallicRoughness) {
                    const ThreeJS = modelViewer.getThreeJS();
                    defaultMaterialState.push({
                        material: material,
                        baseColor: material.pbrMetallicRoughness.baseColorFactor ? [...material.pbrMetallicRoughness.baseColorFactor] : [1, 1, 1, 1],
                        metallic: material.pbrMetallicRoughness.metallicFactor || 0.0,
                        roughness: material.pbrMetallicRoughness.roughnessFactor || 1.0,
                        emissive: material.emissive.getHex(),
                        emissiveIntensity: material.emissiveIntensity || 0,
                    });
                }
            });
            console.log('æè³ªåˆå§‹ç‹€æ…‹å„²å­˜å®Œæˆã€‚');
        });

        // ===========================================
        // 2. æ ¸å¿ƒåŠŸèƒ½å‡½æ•¸ (ç¢ºä¿åœ¨é»æ“Šæ™‚æª¢æŸ¥ææ–™æ˜¯å¦æº–å‚™å¥½)
        // ===========================================

        /**
         * è¨­ç½®æè³ªçš„è‡ªç™¼å…‰ (Emissive) æ•ˆæœ
         * @param {string} hexColor - ç™¼å…‰é¡è‰² (ä¾‹å¦‚ '#FF00FF')
         * @param {number} strength - ç™¼å…‰å¼·åº¦ (0.0 åˆ° 1.0)
         */
        window.setEmissive = (hexColor, strength) => {
            if (!materialsReady) {
                console.warn('æ¨¡å‹å°šæœªæº–å‚™å¥½ã€‚');
                return;
            }
            
            const ThreeJS = modelViewer.getThreeJS();
            const emissiveColor = new ThreeJS.Color(hexColor);
            
            modelViewer.model.materials.forEach(material => {
                if (material.pbrMetallicRoughness) {
                    material.emissiveFactor = 1; // éœ€è¦ç¢ºä¿æ­¤å€¼å¤§æ–¼ 0
                    material.emissive.copy(emissiveColor); 
                    material.emissiveIntensity = strength * 5; // æé«˜å¼·åº¦ï¼Œä½¿æ•ˆæœæ›´æ˜é¡¯
                    material.needsUpdate = true;
                }
            });
        };

        /**
         * æ”¹è®Šæ¨¡å‹çš„åŸºæœ¬é¡è‰²
         * @param {string} hexColor - åŸºç¤é¡è‰² (ä¾‹å¦‚ '#00FFCC')
         */
        window.setBaseColor = (hexColor) => {
            if (!materialsReady) {
                console.warn('æ¨¡å‹å°šæœªæº–å‚™å¥½ã€‚');
                return;
            }

            const ThreeJS = modelViewer.getThreeJS();
            const color = new ThreeJS.Color(hexColor);
            const colorArray = [color.r, color.g, color.b, 1]; 

            modelViewer.model.materials.forEach(material => {
                if (material.pbrMetallicRoughness) {
                    material.pbrMetallicRoughness.setBaseColorFactor(colorArray);
                    
                    // ç‚ºäº†é¿å…ç™¼å…‰å¹²æ“¾é¡è‰²ï¼Œé‡è¨­ç™¼å…‰
                    material.emissiveFactor = 0;
                    material.emissiveIntensity = 0;
                    material.needsUpdate = true;
                }
            });
        };
        
        /**
         * èª¿æ•´é‡‘å±¬è³ªæ„Ÿå’Œç²—ç³™åº¦ï¼Œæ¨¡æ“¬é¡é¢é‡‘å±¬
         * @param {number} metallic - é‡‘å±¬è³ªæ„Ÿ (0.0 åˆ° 1.0)
         * @param {number} roughness - ç²—ç³™åº¦ (0.0 åˆ° 1.0)
         */
        window.setMaterialEffect = (metallic, roughness) => {
            if (!materialsReady) {
                console.warn('æ¨¡å‹å°šæœªæº–å‚™å¥½ã€‚');
                return;
            }
            
            modelViewer.model.materials.forEach(material => {
                if (material.pbrMetallicRoughness) {
                    material.pbrMetallicRoughness.setMetallicFactor(metallic);
                    material.pbrMetallicRoughness.setRoughnessFactor(roughness);
                    material.emissiveFactor = 0;
                    material.emissiveIntensity = 0;
                    material.needsUpdate = true;
                }
            });
        };


        /**
         * é‡ç½®æ‰€æœ‰æè³ªå±¬æ€§åˆ°æ¨¡å‹è¼‰å…¥æ™‚çš„åˆå§‹ç‹€æ…‹
         */
        window.resetMaterials = () => {
            if (!materialsReady) {
                console.warn('æ¨¡å‹å°šæœªæº–å‚™å¥½ã€‚');
                return;
            }

            defaultMaterialState.forEach(state => {
                const material = state.material;
                if (material.pbrMetallicRoughness) {
                    // é‡ç½®é¡è‰²ã€é‡‘å±¬åº¦ã€ç²—ç³™åº¦
                    material.pbrMetallicRoughness.setBaseColorFactor(state.baseColor);
                    material.pbrMetallicRoughness.setMetallicFactor(state.metallic);
                    material.pbrMetallicRoughness.setRoughnessFactor(state.roughness);
                    
                    // é‡ç½®è‡ªç™¼å…‰
                    material.emissive.setHex(state.emissive);
                    material.emissiveIntensity = state.emissiveIntensity;
                    material.emissiveFactor = state.emissiveIntensity > 0 ? 1 : 0; 

                    material.needsUpdate = true;
                }
            });
        };
        
    </script>
</body>
</html>
